{"version":3,"sources":["main.js"],"names":["siteListObj","localStorage","getItem","hashMap","JSON","parse","logo","url","$siteList","$","$lastLi","find","simplifyUrl","replace","render","remove","forEach","node","index","$li","insertBefore","on","window","open","e","console","log","stopPropagation","splice","setStorage","alert","prompt","indexOf","push","toUpperCase","hashStr","stringify","setItem","document","key","i","length","toLowerCase"],"mappings":"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","file":"main.c202b1dc.js","sourceRoot":"../src","sourcesContent":["const siteListObj = localStorage.getItem('siteList')\n\nconst hashMap = JSON.parse(siteListObj) || [\n    { logo: 'A', url: 'acfun.cn' }\n]\nconst $siteList = $(\".siteList\")\nconst $lastLi = $siteList.find('li.last')\n\n//简化url 需要用到字符串替换和正则\nconst simplifyUrl = (url) => {\n    return url.replace('https://', '')\n        .replace('http://', '')\n        .replace('www.', '')\n        .replace(/\\/.*/, '')\n}\n\n//渲染 先清空list的dom 然后遍历数组挨个添加dom\nconst render = () => {\n    $siteList.find('li:not(.last)').remove()\n    hashMap.forEach((node, index) => {\n        const $li = $(`<li>\n            <div class=\"site\">\n                <div class=\"logo\">${node.logo}</div>\n                <div class=\"link\">${simplifyUrl(node.url)}</div>\n                <div class=\"close\"><svg class=\"icon\">\n                <use xlink:href=\"#icon-delete\"></use>\n            </svg></div>\n            </div>\n    </li>`).insertBefore($lastLi)\n\n        //添加点击跳转事件(代替a标签)和删除事件\n        $li.on('click', () => {\n            window.open(node.url)\n        })\n\n        $li.on('click', '.close', (e) => {\n            console.log('del')\n            e.stopPropagation()\n            hashMap.splice(index, 1)\n            setStorage()\n            alert('删除成功')\n            render()\n        })\n\n    })\n}\n\nrender()\n\n//新增网站\n$(\".addbutton\").on('click', () => {\n    let url = window.prompt('请输入要添加的网址？')\n    if (url.indexOf('http') !== 0) {\n        url = 'https://' + url\n    }\n    //将新的数据push到数组后 重新渲染\n    hashMap.push({\n        logo: simplifyUrl(url)[0].toUpperCase(),\n        url: url\n    })\n    setStorage()\n    render()\n})\n\n//网站关闭时保存hash到localstorage\n// window.onbeforeunload = () => {\n//         const hashStr = JSON.stringify(hashMap)\n//         localStorage.setItem('siteList', hashStr)\n//     }\n//改为每次增加和删除都操作localStorage\nconst setStorage = () => {\n    const hashStr = JSON.stringify(hashMap)\n    localStorage.setItem('siteList', hashStr)\n}\n\n//键盘事件\n$(document).on('keypress', (e) => {\n    console.log(e.key)\n    const { key } = e\n    for (let i = 0; i < hashMap.length; i++) {\n        if (hashMap[i].logo.toLowerCase() === key) {\n            window.open(hashMap[i].url)\n        }\n    }\n})"]}